#!/usr/bin/python
# -*- coding: utf-8 -*-

import os
import sys
import xmpp

f = open("bots_proc.txt", "r")
f_ = open("bots_proc.txt", "r")
jid = '1 1'
i = 0
l = len(f_.readlines())
while jid <> '':
    i += 1
    jid = (f.readline()).split(' ')[0]
    j = xmpp.JID(jid)

    print "%4d / %4d Working with %s" %(i, l, jid)

    cl = xmpp.Client(j.getDomain(), debug = [])
    cl.connect()
    if cl.auth(j.getNode(), "123456"):
        print "Deliting bot..."
        if xmpp.features.unregister(cl, "jabber.ru"):
            print "\t[OK]"
        else:
            print "\t[ERROR]"
    else:
        print "Cannot authorize."
    print ""
