Скрипт для уменьшения и правильного поворачивания фотографий с цифровой камеры, например перед отправкой на имейл или закидывания в Дропбокс. Если фотографии посылаются для их просмотра на экране, то зачем слать 6-12 мегапиксельные фото? Под правильным поворотом я подразумеваю разворачивание на 90 градусов портретных фото. 
Для работы скрипта нужны пакеты jhead и imagemagick. Т.е. единожды нужно сделать следующее: sudo apt-get install jhead imagemagick

Я использую его на Убунту в Наутилусе. Как известно, если положить какой-то скрипт в папку ~/.gnome2/nautilus-scripts, то он появится в контекстном меню Наутилуса. Теперь мне нужно выделить нужные фото или даже папки, и уменьшенные копии картинок сохранятся в папке resized.

Это мой первый bash-скрипт, так что не пугайтесь.
Например, я не знаю как в цикле for FILE in $1/*.JPG; перебрать не только JPG, но и jpg. Можно написать второй цикл, но как-то некрасиво.

<cut>
<table class="highlighttable" id="1700"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><a name="line-1"></a><span class="c">#!/bin/bash</span>
<a name="line-2"></a>
<a name="line-3"></a><span class="k">function </span>resize_file <span class="o">{</span>
<a name="line-4"></a>	jhead -autorot <span class="s2">"$1"</span>
<a name="line-5"></a>	convert <span class="s2">"$1"</span> -resize 1280x1024 -quality 80 <span class="sb">`</span>dirname <span class="nv">$1</span><span class="sb">`</span>/resized/<span class="sb">`</span>basename <span class="nv">$1</span><span class="sb">`</span>
<a name="line-6"></a><span class="o">}</span>
<a name="line-7"></a>
<a name="line-8"></a><span class="k">function </span>resize_dir <span class="o">{</span>
<a name="line-9"></a>	<span class="k">for </span>FILE in <span class="nv">$1</span>/*.JPG; <span class="k">do </span>
<a name="line-10"></a><span class="k">		</span>jhead -autorot <span class="s2">"$FILE"</span>
<a name="line-11"></a>		convert <span class="s2">"$FILE"</span> -resize 1280x1024 -quality 80 <span class="sb">`</span>dirname <span class="nv">$FILE</span><span class="sb">`</span>/resized/<span class="sb">`</span>basename <span class="nv">$FILE</span><span class="sb">`</span>; 
<a name="line-12"></a>	<span class="k">done</span>
<a name="line-13"></a><span class="o">}</span>
<a name="line-14"></a>
<a name="line-15"></a><span class="k">if</span> &lt; <span class="nv">$# </span>-gt 0 &gt;; <span class="k">then</span>
<a name="line-16"></a><span class="k">	for </span>I in <span class="nv">$*</span>; <span class="k">do</span>
<a name="line-17"></a><span class="k">		if</span> &lt; -f <span class="nv">$I</span> &gt;; <span class="k">then</span>
<a name="line-18"></a><span class="k">			</span><span class="nb">echo</span> <span class="nv">$I</span><span class="s2">" - File"</span>
<a name="line-19"></a>			mkdir -p -v <span class="sb">`</span>dirname <span class="nv">$I</span><span class="sb">`</span>/resized
<a name="line-20"></a>			resize_file <span class="nv">$I</span>
<a name="line-21"></a>		<span class="k">else </span>
<a name="line-22"></a><span class="k">			if</span> &lt; -d <span class="nv">$I</span> &gt;; <span class="k">then</span>
<a name="line-23"></a><span class="k">				</span><span class="nb">echo</span> <span class="nv">$I</span><span class="s2">" - Directory"</span>
<a name="line-24"></a>				mkdir -p -v <span class="nv">$I</span>/resized
<a name="line-25"></a>				resize_dir <span class="nv">$I</span>
<a name="line-26"></a>			<span class="k">else</span>
<a name="line-27"></a><span class="k">				</span><span class="nb">echo</span> <span class="nv">$I</span><span class="s2">" - error"</span>
<a name="line-28"></a>			<span class="k">fi</span>
<a name="line-29"></a><span class="k">		fi </span>
<a name="line-30"></a><span class="k"> </span>
<a name="line-31"></a><span class="k">	done</span>
<a name="line-32"></a><span class="k">else</span>
<a name="line-33"></a><span class="k">	</span>mkdir -p -v ./resized
<a name="line-34"></a>	resize_dir .
<a name="line-35"></a><span class="k">fi</span>
</pre></div>
</td></tr></table>