#!/bin/bash

luakit_flash_watch()
{
	local pid=$(pgrep luakit)
	movs=$(ls -lh /proc/$pid/fd | grep Flash | cut -f 9 -d' ')
	for i in $movs ; do
		mplayer /proc/$pid/fd/$i
	done
}

luakit_flash_save()
{
	local pid=$(pgrep luakit)
	movs=$(ls -lh /proc/$pid/fd | grep Flash | cut -f 9 -d' ')
	for i in $movs ; do
		cp /proc/$pid/fd/$i ./$i.flv
	done
}

[[ $1 ]] && [[ $1 = watch ]] luakit_flash_watch
