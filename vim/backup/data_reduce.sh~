#!/bin/bash

if [[ -z $1 ]]; then
	file='/tmp/res'
else
	file="$1"
fi

if [[ -z $2 ]]; then
	out_f='/tmp/clear_res'
else
	out_f="$2"
fi

if [[ -z $3 ]]; then
	skip=100
else
	skip="$3"
fi

total_l=$(wc -l "$file")
total_l=${total_l% *}
one_p=$(($total_l / $(tput cols)))

let j=0
let c=0
while read i; do
	[[ $j == 0 ]] && echo "$i" >> "$out_f"
	let j++
	[[ $j == $skip ]] && let j=0
	if [[ $c == $one_p ]]; then
		let c=0
		printf '\b='
		printf '>'
	else
		let c++
	fi
done < "$file"
printf '='
echo ''
